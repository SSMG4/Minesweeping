<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minesweeping</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
  <!-- Modal for username/password on first visit -->
  <div id="auth-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Welcome to Minesweeping</h2>
      <p>Please choose a username and password. <b>No recovery possible!</b></p>
      <form id="auth-form">
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Continue</button>
      </form>
      <p id="auth-error" class="error"></p>
      <small class="disclaimer">Disclaimer: If you lose your password, your account cannot be recovered.</small>
    </div>
  </div>

  <!-- Daily Challenge Notification -->
  <div id="daily-notify" class="notify hidden">
    <span id="daily-message"></span>
    <button id="daily-close">OK</button>
  </div>

  <!-- Main menu -->
  <div id="menu" class="screen">
    <h1>Minesweeping</h1>
    <div class="smiley-row">
      <div class="circle">
        <img id="smiley" class="smiley-img" src="littleguydefault.png" alt="Smiley">
      </div>
      <span id="hint-icon" class="hint-icon hidden" title="Hint"></span>
    </div>
    <p>Welcome, <span id="current-user"></span>! <span id="user-streak"></span></p>
    <button id="start-game-btn">Start Game</button>
    <button id="daily-challenge-btn">Daily Challenge</button>
    <button id="stats-btn">Statistics</button>
    <button id="how-to-btn">How to Play</button>
    <button id="settings-btn">Settings</button>
    <button id="logout-btn">Logout</button>
  </div>

  <!-- Game Screen -->
  <div id="game" class="screen hidden">
    <div class="top-bar">
      <button id="back-to-menu">← Back</button>
      <div class="circle">
        <img id="game-smiley" class="smiley-img" src="littleguydefault.png" alt="Smiley">
      </div>
      <span id="game-hint-icon" class="hint-icon hidden" title="Hint"></span>
      <span id="timer" class="sevenseg">000</span>
      <span id="bombs-left" class="sevenseg">010</span>
      <button id="fullscreen-btn">Fullscreen</button>
      <button id="field-fullscreen-btn">Field Fullscreen</button>
    </div>
    <div id="minefield-container">
      <div id="minefield"></div>
    </div>
    <div class="game-bottom">
      <span id="difficulty-label"></span>
      <span id="cell-size-label"></span>
      <span id="bombs-flagged-label"></span>
    </div>
  </div>

  <!-- Statistics Screen -->
  <div id="stats" class="screen hidden">
    <button class="back-btn">← Back</button>
    <h2>Your Statistics</h2>
    <div id="stats-content"></div>
  </div>

  <!-- How to Play Screen -->
  <div id="howto" class="screen hidden">
    <button class="back-btn">← Back</button>
    <h2>How to Play Minesweeper</h2>
    <div class="howto-content">
      <p>
        Minesweeper is a classic logic puzzle game. The goal is to uncover all the non-bomb cells on a grid, without clicking on a bomb.
      </p>
      <h3>Game Basics</h3>
      <ul>
        <li>The grid contains a number of hidden bombs. The size and number depend on difficulty.</li>
        <li>Each cell may be empty, contain a number, or be a bomb.</li>
        <li>Numbers show how many bombs are adjacent (including diagonally) to that cell.</li>
        <li>Use logic and deduction to figure out which cells are safe.</li>
      </ul>
      <h3>Controls</h3>
      <ul>
        <li><b>Left click</b> (or tap): Reveal a cell.</li>
        <li><b>Right click</b> (or long tap): Place or remove a flag to mark a suspected bomb.</li>
        <li><b>Smiley face:</b> Restart the game. It changes expression when you win or lose.</li>
        <li><b>Hints:</b> You get two hints per round. Click the lightbulb next to the smiley to reveal a safe cell.</li>
      </ul>
      <h3>Winning & Losing</h3>
      <ul>
        <li>You win by revealing all non-bomb cells.</li>
        <li>You lose if you reveal a cell containing a bomb.</li>
        <li>Your stats are tracked for wins, losses, hints, and streaks.</li>
      </ul>
      <h3>Tips & Strategies</h3>
      <ul>
        <li>Start by revealing random cells. Corners and edges are good bets.</li>
        <li>Use the numbers to deduce where bombs are. If a cell shows "1" and only one adjacent cell is hidden, that hidden cell is a bomb.</li>
        <li>Flag bombs to avoid accidentally clicking them.</li>
        <li>If you’re stuck, use a hint. But remember, you only get two per round.</li>
        <li>Try to clear areas where the numbers give obvious clues first. Practice will help you recognize patterns.</li>
      </ul>
      <h3>Legend</h3>
      <ul>
        <li><b>Timer</b>: Shows your elapsed time in red digits.</li>
        <li><b>Bomb Counter</b>: Shows how many bombs are left to flag.</li>
        <li><b>Smiley Icon</b>: Resets the board; changes for win/loss.</li>
        <li><b>Flag</b>: Marks a suspected bomb location.</li>
      </ul>
      <p>Good luck! Minesweeper is about logic, deduction, and a touch of luck.</p>
    </div>
  </div>

  <!-- Settings Screen -->
  <div id="settings" class="screen hidden">
    <button class="back-btn">← Back</button>
    <h2>Settings</h2>
    <form id="settings-form">
      <label>Theme:
        <select id="theme-select">
          <option value="classic">Classic</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="black">Black</option>
        </select>
      </label>
      <label>Difficulty:
        <select id="difficulty-select">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
          <option value="extreme">Extreme</option>
        </select>
      </label>
      <label>Cell Size:
        <select id="cell-size-select">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>
      </label>
    </form>
    <button id="save-settings-btn">Save</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
